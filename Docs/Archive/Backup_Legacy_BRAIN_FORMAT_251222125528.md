# Brain Canvas Format

> File format and creation rules for Archon Brain canvas system.
> All AI tools must reference this document when working with Brain canvas.

---

## ğŸš« MANDATORY CHECKS

**Before ANY file operations, verify:**

1. âœ… Understand all 3 Blocking Rules below
2. âœ… Calculate `fileName` from canvas `name:` value
3. âœ… Verify ALL folder names match `fileName`
4. âœ… Plan node positions using Grid Layout (no overlap!)

**Skipping these steps = BROKEN canvas showing "0 nodes" in Archon app.**

---

## â›” BLOCKING RULE #1: fileName (ZERO TOLERANCE)

**If canvas `name:` value and folder names don't match, Archon app CANNOT load nodes!**

### fileName Generation Algorithm

```swift
var fileName: String {
    name.replacingOccurrences(of: " ", with: "-")  // 1. Space â†’ Hyphen
        .lowercased()                               // 2. Lowercase
        .filter { $0.isLetter || $0.isNumber || $0 == "-" }  // 3. Keep only letters/numbers/hyphens
}
```

### Transformation Examples

| `name:` value | Generated fileName |
|---------------|-------------------|
| `"My Canvas"` | `my-canvas` |
| `"Aesthetic Canvas: Minimal Diary"` | `aesthetic-canvas-minimal-diary` |
| `"UI Design (v2)"` | `ui-design-v2` |

### Folder Naming Rule (MUST MATCH fileName)

```
Canvas file:    {fileName}.md
Nodes folder:   {fileName}_Nodes/
Connections:    {fileName}_Connections/
Datasheet:      {fileName}_Datasheet/
```

---

## â›” BLOCKING RULE #2: Node Positioning (NO OVERLAP)

**Nodes MUST be placed on grid. Overlapping nodes = unusable canvas.**

```
Position X = COLUMN Ã— 350
Position Y = ROW Ã— 250
```

---

## â›” BLOCKING RULE #3: Mandatory Validation

**After creating ALL files, AI MUST verify and print validation checklist.**

---

## Directory Structure

```
Docs/Brain/
â”œâ”€â”€ {fileName}.md                      # Main canvas file
â”œâ”€â”€ {fileName}_Nodes/                  # Node files directory
â”œâ”€â”€ {fileName}_Connections/            # Connection files directory
â””â”€â”€ {fileName}_Datasheet/              # Datasheet files directory
```

---

## Node Size Reference

| Node Type | Width | Height | Note |
|-----------|-------|--------|------|
| Heading-Text | 200 | 40 | - |
| Body-Text | 260 | 130 | - |
| Post-It | 190 | 140 | - |
| Image | 250 | 300 | - |
| Memo | 165 | **40 (minimize)** | âš ï¸ Always use minimum height |
| Data-Sheet | 265 | **40 (minimize)** | âš ï¸ Always use minimum height |

**âš ï¸ Memo & Data-Sheet Height Rule:**
Memo and Data-Sheet nodes MUST use minimum height (40). These node types auto-expand when opened in Archon app.

---

## ğŸš¨ FINAL SUMMARY: 3 BLOCKING RULES

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ RULE #1: fileName MUST match folder names                   â”ƒ
â”ƒ RULE #2: Nodes MUST use grid positions (X=COLÃ—350, Y=ROWÃ—250)â”ƒ
â”ƒ RULE #3: MUST print validation checklist after completion   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

VIOLATION = BROKEN CANVAS (0 nodes, overlapping nodes, unusable)
```

---
*Generated by Archon*